<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>충치 예방 프로그램</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.2/mqttws31.min.js" type="text/javascript"></script>
        <script src="/static/mqttio.js" type="text/javascript"></script>  
        <link rel="stylesheet" type="text/css" href="/static/indexstyle.css">
        <script>
              window.addEventListener("load", function () {
                  // http://224..129:8080/에서 224...의 IP만 끊어내는 코드
                  var url = new String(document.location);
                  ip = (url.split("//"))[1]; // ip = "224...:8080/"
                  ip = (ip.split(":"))[0]; // ip = "224..."
                  document.getElementById("broker").value = ip
              });
        </script>
     </head>
  
<body>
    <h1>우리 아들,딸의 충치를 예방해 봅시다!</h1>
    <div class="manual"># 활용 방법 #
        <ol>
            <li>IP를 입력하세요. 포트 번호는 9001 입니다.(입력 할 필요 없음)</li>
            <li>첫째면 Topic에 "old", 둘째면 "young"을 입력하세요.</li>
            <li>"확인"버튼을 눌러 현재 활동 상태를 확인하세요.</li>
        </ol>
        <ul>
            <li>"기록조회"메뉴에서 버튼을 누르면 기록을 확인 할 수 있습니다.</li>
            <li>우측 상단의 버튼을 눌러 이 화면으로 다시 돌아오세요.</li>
        </ul>
    </div>
    <br><br>
    <div class="info-box">
    <div class="info-now">
    <span class="title">현재 상태 확인</span>
    <form id="connection-form">
        <input class="connection-input" id="broker" type="text" name="broker" placeholder="IP adress"><br>
        <input class="connection-input" id="port" type="text" name="port" value="9001"><br>
        <input class="connection-input" id="topic" type="text" name="topic" placeholder="old or young"><br>
        <input class="connection-input" type="button" onclick="startConnect()" value="확인"><br>
    </form>
    <p>
    <span id = "topicName"></span>는(은) 지금 양치질을 <span id="messages"></span>있습니다.
    </p><br>
    </div>

    <div class="info-history">
    <span class="title">기록 조회</span><br>
    <form class="view" action="/old/" method="get" >
        <input type="submit" value="첫째">        
    </form>
    <form class="view" action="/young/" method="get" >
        <input type="submit" value="둘째">        
    </form>
    </div>
    </div>

</body>
</html>